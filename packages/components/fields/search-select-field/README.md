<!-- THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. -->
<!-- This file is created by the `yarn generate-readme` script. -->

# SearchSelectField

## Description

A search select field built on top of search select input, allowing users to asynchronously search for options

## Installation

```
yarn add @commercetools-uikit/search-select-field
```

```
npm --save install @commercetools-uikit/search-select-field
```

Additionally install the peer dependencies (if not present)

```
yarn add react
```

```
npm --save install react
```

## Usage

```jsx
import SearchSelectField from '@commercetools-uikit/async-select-field';

const Example = () => (
  <SearchSelectField
    title="customer"
    id="customer"
    name="customer"
    isRequired={true}
    horizontalConstraint={7}
    optionType="single-lined"
    isAutofocussed={false}
    backspaceRemovesValue={true}
    isClearable={true}
    isDisabled={false}
    isReadOnly={false}
    isMulti={false}
    onChange={
      (/* event */) => {
        /** onChange logic */
      }
    }
    noOptionsMessage="No exact match found"
    loadingMessage="loading exact matches"
    placeholder="Select customer"
    loadOptions={
      (/* inputValue */) => {
        // async fetch logic
      }
    }
    renderError={(key) => {
      // This example shows how to handle custom errors on top of the
      // predefined errors of FieldErrors which this component and other
      // Field components use under the hood.
      switch (key) {
        case 'missing':
          return 'This field is required.';
        case 'duplicate':
          return 'This customer is already attached to the store. Customers must be unique.';
        case 'customError':
          return 'A custom error.';
        default:
          return null;
      }
    }}
    cacheOptions={false}
  />
);

export default Example;
```

## Properties

| Props                      | Type                                                                                                  | Required | Default | Description                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------------- | ----------------------------------------------------------------------------------------------------- | :------: | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `horizontalConstraint`     | `union`<br/>Possible values:<br/>`, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 'scale', 'auto'` |          |         | Horizontal size limit of the input fields.                                                                                                                                                                                                                                                                                                                                  |
| `aria-label`               | `AsyncProps['aria-label']`                                                                            |          |         | Aria label (for assistive tech)&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                             |
| `aria-labelledby`          | `AsyncProps['aria-labelledby']`                                                                       |          |         | HTML ID of an element that should be used as the label (for assistive tech)&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                 |
| `id`                       | `AsyncProps['inputId']`                                                                               |          |         | The id of the search input. This forwarded as react-select's "inputId"&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                      |
| `containerId`              | `AsyncProps['id']`                                                                                    |          |         | The id to set on the SelectContainer component. This is forwarded as react-select's "id"&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                    |
| `name`                     | `AsyncProps['name']`                                                                                  |          |         | Name of the HTML Input (optional - without this, no input will be rendered)&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                 |
| `placeholder`              | `AsyncProps['placeholder']`                                                                           |          |         | Placeholder text for the select value&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                       |
| `components`               | `AsyncProps['components']`                                                                            |          |         | Map of components to overwrite the default ones, see [what components you can override](https://react-select.com/components)&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                |
| `controlShouldRenderValue` | `AsyncProps['controlShouldRenderValue']`                                                              |          | `true`  | Control whether the selected values should be rendered in the control&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                       |
| `tabIndex`                 | `AsyncProps['tabIndex']`                                                                              |          |         | Sets the tabIndex attribute on the input&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                    |
| `value`                    | `AsyncProps['value']`                                                                                 |          |         | The value of the select; reflected by the selected option&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                   |
| `backspaceRemovesValue`    | `AsyncProps['backspaceRemovesValue']`                                                                 |          |         | Remove the currently focused option when the user presses backspace&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                         |
| `hasError`                 | `boolean`                                                                                             |          |         | Indicates the input field has an error                                                                                                                                                                                                                                                                                                                                      |
| `hasWarning`               | `boolean`                                                                                             |          |         | Indicates the input field has a warning&#xA;@deprecated Please use the `warnings` prop instead so users know the reason why the field is in warning state.                                                                                                                                                                                                                  |
| `isReadOnly`               | `boolean`                                                                                             |          |         | Is the select read-only                                                                                                                                                                                                                                                                                                                                                     |
| `isDisabled`               | `boolean`                                                                                             |          |         | Is the select disabled                                                                                                                                                                                                                                                                                                                                                      |
| `isClearable`              | `boolean`                                                                                             |          |         | Is the select value clearable                                                                                                                                                                                                                                                                                                                                               |
| `isCondensed`              | `boolean`                                                                                             |          |         | Whether the input and its options are rendered with condensed paddings                                                                                                                                                                                                                                                                                                      |
| `isOptionDisabled`         | `AsyncProps['isOptionDisabled']`                                                                      |          |         | Override the built-in logic to detect whether an option is disabled&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                         |
| `isMulti`                  | `AsyncProps['isMulti']`                                                                               |          |         | Support multiple selected options&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                           |
| `isAutofocussed`           | `boolean`                                                                                             |          |         | Focus the control when it is mounted. Renamed autoFocus of react-select                                                                                                                                                                                                                                                                                                     |
| `noOptionsMessage`         | `AsyncProps['noOptionsMessage']`                                                                      |          |         | Can be used to render a custom value when there are no options (either because of no search results, or all options have been used, or there were none in the first place). Gets called with `{ inputValue: String }`. `inputValue` will be an empty string when no search text is present.&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props) |
| `maxMenuHeight`            | `AsyncProps['maxMenuHeight']`                                                                         |          |         | Maximum height of the menu before scrolling&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                 |
| `menuPortalTarget`         | `AsyncProps['menuPortalTarget']`                                                                      |          |         | Dom element to portal the select menu to&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                    |
| `menuPortalZIndex`         | `number`                                                                                              |          |         | z-index value for the menu portal&#xA;<br>&#xA;Use in conjunction with `menuPortalTarget`                                                                                                                                                                                                                                                                                   |
| `menuShouldBlockScroll`    | `boolean`                                                                                             |          |         | whether the menu should block scroll while open                                                                                                                                                                                                                                                                                                                             |
| `showOptionGroupDivider`   | `boolean`                                                                                             |          |         | Determines if option groups will be separated by a divider                                                                                                                                                                                                                                                                                                                  |
| `onBlur`                   | `Function`<br/>[See signature.](#signature-onBlur)                                                    |          |         | Handle blur events on the control                                                                                                                                                                                                                                                                                                                                           |
| `onChange`                 | `Function`<br/>[See signature.](#signature-onChange)                                                  |          |         | Called with a fake event when value changes.&#xA;<br />&#xA;The event's `target.name` will be the `name` supplied in props. The event's `target.value` will hold the value. The value will be the selected option, or an array of options in case `isMulti` is `true`.                                                                                                      |
| `onFocus`                  | `AsyncProps['onFocus']`                                                                               |          |         | Handle focus events on the control&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                          |
| `onInputChange`            | `AsyncProps['onInputChange']`                                                                         |          |         | Handle change events on the input&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                                                           |
| `tabSelectsValue`          | `AsyncProps['tabSelectsValue']`                                                                       |          |         | Select the currently focused option when the user presses tab&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                               |
| `loadOptions`              | `AsyncProps['loadOptions']`                                                                           |    ✅    |         | Function that returns a promise, which is the set of options to be used once the promise resolves.&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                          |
| `loadingMessage`           | `union`<br/>Possible values:<br/>`string , (() => string)`                                            |          |         | The text shown while the options are being loaded                                                                                                                                                                                                                                                                                                                           |
| `cacheOptions`             | `AsyncProps['cacheOptions']`                                                                          |          |         | If cacheOptions is truthy, then the loaded data will be cached. The cache will remain until cacheOptions changes value.&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                     |
| `filterOption`             | `AsyncProps['filterOption']`                                                                          |          |         | Custom method to filter whether an option should be displayed in the menu&#xA;<br>&#xA;[Props from React select was used](https://react-select.com/props)                                                                                                                                                                                                                   |
| `optionType`               | `union`<br/>Possible values:<br/>`'single-property' , 'double-property' , 'multiple-properties'`      |          |         | The style of the an option in the dropdown menu. It could be single lined option or an option with more and custom info                                                                                                                                                                                                                                                     |
| `errors`                   | `Record`                                                                                              |          |         | A map of errors. Error messages for known errors are rendered automatically.&#xA;<br />&#xA;Unknown errors will be forwarded to `renderError`                                                                                                                                                                                                                               |
| `renderError`              | `Function`<br/>[See signature.](#signature-renderError)                                               |          |         | Called with custom errors. This function can return a message which will be wrapped in an ErrorMessage. It can also return null to show no error.                                                                                                                                                                                                                           |
| `warnings`                 | `Record`                                                                                              |          |         | A map of warnings. Warning messages for known warnings are rendered automatically.&#xA;<br/>&#xA;Unknown warnings will be forwarded to renderWarning.                                                                                                                                                                                                                       |
| `renderWarning`            | `Function`<br/>[See signature.](#signature-renderWarning)                                             |          |         | Called with custom warnings, as renderWarning(key, warning). This function can return a message which will be wrapped in a WarningMessage.&#xA;<br />&#xA;It can also return null to show no warning.                                                                                                                                                                       |
| `isRequired`               | `boolean`                                                                                             |          |         | Indicates if the value is required. Shows an the "required asterisk" if so.                                                                                                                                                                                                                                                                                                 |
| `touched`                  | `union`<br/>Possible values:<br/>`boolean[] , boolean`                                                |          |         | Indicates whether the field was touched. Errors will only be shown when the field was touched.                                                                                                                                                                                                                                                                              |
| `title`                    | `ReactNode`                                                                                           |    ✅    |         | Title of the label                                                                                                                                                                                                                                                                                                                                                          |
| `hint`                     | `ReactNode`                                                                                           |          |         | Hint for the label. Provides a supplementary but important information regarding the behaviour of the input (e.g warn about uniqueness of a field, when it can only be set once), whereas `description` can describe it in more depth. Can also receive a `hintIcon`.                                                                                                       |
| `description`              | `ReactNode`                                                                                           |          |         | Provides a description for the title.                                                                                                                                                                                                                                                                                                                                       |
| `onInfoButtonClick`        | `Function`<br/>[See signature.](#signature-onInfoButtonClick)                                         |          |         | Function called when info button is pressed.&#xA;<br />&#xA;Info button will only be visible when this prop is passed.                                                                                                                                                                                                                                                      |
| `hintIcon`                 | `ReactElement`                                                                                        |          |         | Icon to be displayed beside the hint text.&#xA;<br />&#xA;Will only get rendered when `hint` is passed as well.                                                                                                                                                                                                                                                             |
| `badge`                    | `ReactNode`                                                                                           |          |         | Badge to be displayed beside the label.&#xA;<br />&#xA;Might be used to display additional information about the content of the field (E.g verified email)                                                                                                                                                                                                                  |
| `iconLeft`                 | `ReactNode`                                                                                           |          |         | Icon to display on the left of the placeholder text and selected value. Has no effect when `isMulti` is enabled.                                                                                                                                                                                                                                                            |

## Signatures

### Signature `onBlur`

```ts
(event: TCustomEvent) => void
```

### Signature `onChange`

```ts
(event: TCustomEvent, info: ActionMeta<unknown>) => void
```

### Signature `renderError`

```ts
(key: string, error?: boolean) => ReactNode;
```

### Signature `renderWarning`

```ts
(key: string, warning?: boolean) => ReactNode;
```

### Signature `onInfoButtonClick`

```ts
(
  event: MouseEvent<HTMLButtonElement> | KeyboardEvent<HTMLButtonElement>
) => void
```

## `data-*` props

The component further forwards all `data-` attributes to the underlying `SearchSelectInput` component.

The underlying `@commercetools-uikit/search-select-input` is built on top of `@commercetools-uikit/async-select-input` which on its own turn is built on top of [`react-select`](https://github.com/JedWatson/react-select) v3. `@commercetools-uikit/async-select-input` supports mostly the same properties as `react-select` with some minor changes in the behaviour of some of the props. The `@commercetools-uikit/search-select-input` which is built on top `@commercetools-uikit/async-select-input` has predefined values for some the props. The props that have predefined values in `@commercetools-uikit/search-select-input` are as follows:

In case you need one of the currently excluded props, feel free to open a PR adding them to either `@commercetools-uikit/search-select-input` or `@commercetools-uikit/async-select-input`.

## `errors`

This object is a key-value map. The `renderError` prop will be called for each entry with the key and the value. The return value will be rendered inside an `ErrorMessage` component underneath the input.

The `SearchSelectField` supports some errors out of the box. Return `undefined` from `renderError` for these and the default errors will be shown instead. This prevents consumers from having to reimplement the same error messages for known errors while still keeping the flexibility of showing custom error messages for them.

When the `key` is known, and when the value is truthy, and when `renderError` returned `undefined` for that error entry, then the `SearchSelectField` will render an appropriate error automatically.

Known error keys are:

- `missing`: tells the user that this field is required

## Static methods

### `SearchSelectField.toFieldErrors`

Use this function to convert the Formik `errors` object type to our custom field errors type. This is primarily useful when using TypeScript.

```ts
type FormValues = {
  myField: string;
};

<SearchSelectField
  // ...
  name="my-field"
  errors={SearchSelectField.toFieldErrors<FormValues>(formik.errors).myField}
/>;
```
